<div class="modal">
  <h2>Nueva Configuración</h2>

  <div *ngIf="errorMessage" class="alert alert-danger">
    <div class="alert-message">
      {{ errorMessage }}
    </div>
    <span class="close-btn" (click)="errorMessage = ''">&times;</span>
  </div>

  <form>
    <!--
    <div class="form-group">
      <label>Módulo:</label>
      <input type="text" [value]="configuracion.modulo" readonly class="readonly-input">
    </div>

    <div class="form-group">
      <label>Descripción:</label>
      <input type="text" [value]="configuracion.descValor" readonly class="readonly-input">
    </div>

    <div class="form-group">
      <label>Tipo de Valor:</label>
      <input type="text" [value]="configuracion.tipoValor" readonly class="readonly-input">
    </div>

    <div class="form-group">
      <label>Longitud:</label>
      <input type="number" [value]="configuracion.longitud" readonly class="readonly-input">
    </div> -->

    <!-- Único campo editable -->
    <div class="form-group">
      <label for="valor">Código de operación:</label>
      <input type="text" id="valor" placeholder="Valor"
             [(ngModel)]="configuracion.valor"
             [maxLength]="longitud"
             name="valor" required>

      <!-- Usamos los getters seguros -->
      <div *ngIf="longitud > 0" class="length-indicator"
           [class.max-length]="valor.length >= longitud">
        {{ valor.length }} / {{ longitud }}
      </div>
    </div>

    <div class="button-group">
      <button type="button" class="update-btn"
              (click)="saveConfiguracion()"
              [disabled]="isSaving">
        <i *ngIf="!isSaving" class="fas fa-save"></i>
        <i *ngIf="isSaving" class="fas fa-spinner fa-spin"></i>
        {{ isSaving ? 'Guardando...' : 'Guardar Configuración' }}
      </button>

      <button type="button" class="btn-secondary"
              (click)="cancel()">
        <i class="fas fa-times"></i> Cancelar
      </button>
    </div>
  </form>
</div>
